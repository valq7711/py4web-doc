

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="pt" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="pt" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Grid &mdash; py4web 1.20201024.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/js/toggle.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/toggle.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Authentication and Access control" href="chapter-11.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/py4web_art5.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chapter-00.html">O que é py4web?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-01.html">Installation and Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-02.html">Creating your first app</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-03.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-04.html">Fixtures</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-05.html">The database abstraction layer (DAL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-06.html">The RESTAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-07.html">YATL Template Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-08.html">YATL helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-09.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-10.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-11.html">Authentication and Access control</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Grid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#key-features">Key Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-example">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filter-search-example">Filter/Search Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#signature">Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid-defaults">Grid Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="#searching-filtering">Searching / Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#crud">CRUD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#templates">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customizing-style">Customizing Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-action-buttons">Custom Action Buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#action-button-signature">Action Button Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference-fields">Reference Fields</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">py4web</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Grid</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/nicozanf/py4web-doc/blob/master/docs/chapter-12.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grid">
<h1>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h1>
<p><strong>Warning: the API described in this chapter is new and subject to
changes. Make sure you keep your code up to date</strong></p>
<p>py4web comes with a Grid object providing simple grid and CRUD
capabilities.</p>
<div class="section" id="key-features">
<h2>Key Features<a class="headerlink" href="#key-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Click column heads for sorting - click again for DESC</li>
<li>Pagination control</li>
<li>Search Queries list - provide the search queries used to filter the
grid and grid will build the search form (remembers filters between
pages)</li>
<li>Filter Form - you supply and control filtering (remember filters
between pages)</li>
<li>Action Buttons - with or without text</li>
<li>Full CRUD with Delete Confirmation</li>
<li>Pre and Post Action (add your own buttons to each row)</li>
<li>Grid dates in local format using moment.js</li>
<li>Checkboxes in grid for boolean fields</li>
</ul>
</div>
<div class="section" id="simple-example">
<h2>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h2>
<p>In this simple example we will make a grid over the company table.</p>
<p>controllers.py</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py4web.utils.grid</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">get_storage_key</span><span class="p">,</span> <span class="n">get_storage_value</span><span class="p">,</span> <span class="n">GridDefaults</span><span class="p">,</span> <span class="n">GridClassStyle</span>
<span class="kn">from</span> <span class="nn">py4web.utils.param</span> <span class="kn">import</span> <span class="n">Param</span>
<span class="kn">from</span> <span class="nn">.settings</span> <span class="kn">import</span> <span class="n">SESSION_SECRET_KEY</span>

<span class="nd">@action</span><span class="p">(</span><span class="s1">&#39;administration/companies&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@action</span><span class="p">(</span><span class="s1">&#39;administration/companies/&lt;action&gt;/&lt;tablename&gt;/&lt;record_id&gt;&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@action</span><span class="o">.</span><span class="n">uses</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">auth</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">requires_permission</span><span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">),</span> <span class="s1">&#39;grid.html&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">regions</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1">#  NOTE - GRID_COMMON would normally go in common.py and then imported to your controller</span>
    <span class="n">GRID_COMMON</span> <span class="o">=</span> <span class="n">GridDefaults</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>
                               <span class="n">secret</span><span class="o">=</span><span class="n">SESSION_SECRET_KEY</span><span class="p">,</span>
                               <span class="n">rows_per_page</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">queries</span> <span class="o">=</span> <span class="p">[(</span><span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="n">orderby</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">GRID_COMMON</span><span class="p">,</span>
                <span class="n">queries</span><span class="p">,</span>
                <span class="n">orderby</span><span class="o">=</span><span class="n">orderby</span><span class="p">,</span>
                <span class="n">storage_key</span><span class="o">=</span><span class="n">get_storage_key</span><span class="p">())</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
<p>grid.html</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">extend</span> <span class="s1">&#39;layout.html&#39;</span><span class="p">]]</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container&quot;</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;padding-top: 1em;&quot;</span><span class="o">&gt;</span>
    <span class="p">[[</span><span class="k">if</span> <span class="s1">&#39;action&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">url_args</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">url_args</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">]:]]</span>
        <span class="p">[[</span><span class="n">form</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()]]</span>
        <span class="p">[[</span><span class="o">=</span><span class="n">form</span><span class="p">]]</span>
    <span class="p">[[</span><span class="k">else</span><span class="p">:]]</span>
        <span class="p">[[</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()]]</span>
    <span class="p">[[</span><span class="k">pass</span><span class="p">]]</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="filter-search-example">
<h2>Filter/Search Example<a class="headerlink" href="#filter-search-example" title="Permalink to this headline">¶</a></h2>
<p>In this simple example we will make a grid over the companies table. A
search form will be created and allow searching over the company.name
field.</p>
<p>controllers.py</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py4web.utils.grid</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">get_storage_key</span><span class="p">,</span> <span class="n">get_storage_value</span><span class="p">,</span> <span class="n">GridDefaults</span><span class="p">,</span> <span class="n">GridClassStyle</span>
<span class="kn">from</span> <span class="nn">py4web.utils.param</span> <span class="kn">import</span> <span class="n">Param</span>
<span class="kn">from</span> <span class="nn">.settings</span> <span class="kn">import</span> <span class="n">SESSION_SECRET_KEY</span>

<span class="nd">@action</span><span class="p">(</span><span class="s1">&#39;companies&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@action</span><span class="p">(</span><span class="s1">&#39;companies/&lt;action&gt;/&lt;tablename&gt;/&lt;record_id&gt;&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@action</span><span class="o">.</span><span class="n">uses</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="s1">&#39;grid.html&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">companies</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1">#  NOTE - this would normally go in common.py and then imported to your controller</span>
    <span class="n">GRID_COMMON</span> <span class="o">=</span> <span class="n">GridDefaults</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>
                               <span class="n">secret</span><span class="o">=</span><span class="n">SESSION_SECRET_KEY</span><span class="p">,</span>
                               <span class="n">rows_per_page</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">search_queries</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;Search by Name&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">values</span><span class="p">)]]</span>

    <span class="n">queries</span> <span class="o">=</span> <span class="p">[(</span><span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="n">orderby</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">GRID_COMMON</span><span class="p">,</span>
                <span class="n">queries</span><span class="p">,</span>
                <span class="n">search_queries</span><span class="o">=</span><span class="n">search_queries</span><span class="p">,</span>
                <span class="n">storage_values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">search_filter</span><span class="o">=</span><span class="n">search_filter</span><span class="p">),</span>
                <span class="n">orderby</span><span class="o">=</span><span class="n">orderby</span><span class="p">,</span>
                <span class="n">storage_key</span><span class="o">=</span><span class="n">get_storage_key</span><span class="p">())</span>

    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
<p>The same grid.html as above is used in this example.</p>
</div>
<div class="section" id="signature">
<h2>Signature<a class="headerlink" href="#signature" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Grid</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">common_settings</span><span class="p">,</span>
                 <span class="n">queries</span><span class="p">,</span>
                 <span class="n">search_form</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">search_queries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">storage_values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_id</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">orderby</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">headings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">editable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">deletable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">requires</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">storage_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">pre_action_buttons</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">post_action_buttons</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<ul class="simple">
<li>common_settings: Params object with common settings for all grids
within the application</li>
<li>queries: list of queries used to filter the data</li>
<li>search_form: py4web FORM to be included as the search form</li>
<li>search_queries: list of query lists to use to build the search form.
Ignored if search_form is used. Format is</li>
<li>storage_values: values to save between requests</li>
<li>fields: list of fields to display on the list page, if blank, glean
tablename from first query and use all fields of that table</li>
<li>show_id: show the record id field on list page - default = False</li>
<li>orderby: pydal orderby field or list of fields</li>
<li>left: if joining other tables, specify the pydal left expression here</li>
<li>headings: list of headings to be used for list page - if not provided
use the field label</li>
<li>create: URL to redirect to for creating records - set to False to not
display the button</li>
<li>editable: URL to redirect to for editing records - set to False to
not display the button</li>
<li>deletable: URL to redirect to for deleting records - set to False to
not display the button</li>
<li>requires: dict of fields and their ‘requires’ parm for building edit
pages - dict key should be tablename.fieldname</li>
<li>storage_key: id of the cookie containing saved values</li>
<li>pre_action_buttons: list of action_button instances to include before
the standard action buttons</li>
<li>post_action_buttons: list of action_button instances to include after
the standard action buttons</li>
</ul>
</div>
<div class="section" id="grid-defaults">
<h2>Grid Defaults<a class="headerlink" href="#grid-defaults" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">db</span><span class="p">,</span>
             <span class="n">secret</span><span class="p">,</span>
             <span class="n">token_longevity</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span>
             <span class="n">rows_per_page</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
             <span class="n">include_action_button_text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
             <span class="n">search_button_text</span><span class="o">=</span><span class="s2">&quot;Filter&quot;</span><span class="p">,</span>
             <span class="n">formstyle</span><span class="o">=</span><span class="n">FormStyleDefault</span><span class="p">,</span>
             <span class="n">grid_class_style</span><span class="o">=</span><span class="n">GridClassStyle</span><span class="p">):</span>
</pre></div>
</div>
<p>The GridDefaults class allows you to set app-wide grid defaults that you
can use when instantiating grids.0</p>
<ul class="simple">
<li>db: PyDAL db instance to use within your grid</li>
<li>secret: secret encryption key used to encrypt storage values</li>
<li>token_longevity: number of seconds to remember you storage values for
this grid instance</li>
<li>rows_per_page: number of rows to display on each grid page</li>
<li>included_action_button_text: boolean telling the grid whether or not
you want text on action buttons within your grid</li>
<li>search_button_text: text to appear on the submit button on your
search form</li>
<li>formstyle: py4web Form formstyle used to style your form when
automatically building CRUD forms</li>
<li>grid_class_style: GridClassStyle object used to override defaults for
styling your rendered grid. Allows you to specify classes or styles
to apply at certain points in the grid.</li>
</ul>
</div>
<div class="section" id="searching-filtering">
<h2>Searching / Filtering<a class="headerlink" href="#searching-filtering" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to build a search form.</p>
<ul class="simple">
<li>Provide a search_queries list</li>
<li>Build your own custom search form</li>
</ul>
<p>If you provide a search_queries list to grid, it will:</p>
<ol class="arabic simple">
<li>build the search form with all fields provided</li>
<li>gather filter values and filter the grid</li>
<li>if you supply a PyDAL requires statement, it will build the search
field as requested</li>
</ol>
<p>However, if this doesn’t give you enough flexibility you can provide
your own search form and handle all the filtering (building the queries)
by yourself.PyDAL</p>
<p>The grid provides helper functions that allow you save/retrieve filter
values between page displays.</p>
<ul class="simple">
<li>set_storage_values</li>
<li>get_storage_value</li>
</ul>
</div>
<div class="section" id="crud">
<h2>CRUD<a class="headerlink" href="#crud" title="Permalink to this headline">¶</a></h2>
<p>The grid provide CRUD (create, read, update and delete) capabilities
utilizing py4web Form. This is disabled on the grid by default.</p>
<p>You can enable CRUD features by setting
create/details/editable/deletable to True at instantiation.</p>
<p>Additionally, you can provide a separate URL to the
create/details/editable/deletable parameters to bypass the
auto-generated CRUD pages and handle the detail pages yourself.</p>
</div>
<div class="section" id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<p>Use the following to render your grid or CRUD forms in your templates.</p>
<p>Display the grid or a CRUD Form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()]]</span>
</pre></div>
</div>
<p>To allow for customizing CRUD form layout (like with web2py) you can use
the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">form</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()</span> <span class="p">]]</span>
<span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;begin&quot;</span><span class="p">]</span> <span class="p">]]</span>
<span class="o">...</span>
<span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;submit&quot;</span><span class="p">]</span>
<span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>When handling custom form layouts you need to know if you are displaying
the grid or a form. Use the following to decide</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="k">if</span> <span class="s1">&#39;action&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">url_args</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">url_args</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">]:]]</span>
    <span class="c1">#  Display the custom form</span>
    <span class="p">[[</span><span class="n">form</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()</span> <span class="p">]]</span>
    <span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;begin&quot;</span><span class="p">]</span> <span class="p">]]</span>
    <span class="o">...</span>
    <span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;submit&quot;</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">form</span><span class="o">.</span><span class="n">custom</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span>
<span class="p">[[</span><span class="k">else</span><span class="p">:]]</span>
    <span class="p">[[</span><span class="n">grid</span><span class="o">.</span><span class="n">render</span><span class="p">()</span> <span class="p">]]</span>
<span class="p">[[</span><span class="k">pass</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-style">
<h2>Customizing Style<a class="headerlink" href="#customizing-style" title="Permalink to this headline">¶</a></h2>
<p>You can provide your own formstyle or grid classes and style to grid.</p>
<ul class="simple">
<li>formstyle is the same as a Form formstyle, used to style the CRUD
forms.</li>
<li>grid_class_style is a class that provides the classes and/or styles
used for certain portions of the grid.</li>
</ul>
<p>The default GridClassStyle - based on no.css, primarily uses styles to
modify the layout of the grid</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">GridClassStyle</span><span class="p">(</span><span class="n">element_name</span><span class="p">):</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;top_div&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;new_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_table&quot;</span><span class="p">:</span> <span class="s2">&quot;search-form&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_td&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;thead&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;th&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;sorter_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;tbody&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td_date&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td_boolean&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_column_cell&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;table_footer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;row_count&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;pager&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;active_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;inactive_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>

    <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;top_div&quot;</span><span class="p">:</span> <span class="s2">&quot;border-bottom: 0;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;new_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form&quot;</span><span class="p">:</span> <span class="s2">&quot;float: right; border-bottom: 0; padding-bottom: 0; margin-bottom: 0;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_table&quot;</span><span class="p">:</span> <span class="s2">&quot;margin-bottom: 0;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_tr&quot;</span><span class="p">:</span> <span class="s2">&quot;border-bottom: 0; padding-bottom: 0;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_td&quot;</span><span class="p">:</span> <span class="s2">&quot;border-bottom: 0; padding-bottom: 0;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;thead&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;th&quot;</span><span class="p">:</span> <span class="s2">&quot;text-align: center;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;sorter_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;float: right;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;text-align: center; width: 1px; white-space: nowrap;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tbody&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td&quot;</span><span class="p">:</span> <span class="s2">&quot;vertical-align: middle;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td_date&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td_boolean&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_column_cell&quot;</span><span class="p">:</span> <span class="s2">&quot;text-align: center; width: 1px; white-space: nowrap; vertical-align: middle;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_button&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;border: thin solid lightgray; &quot;</span>
                                <span class="s2">&quot;color: black; &quot;</span>
                                <span class="s2">&quot;cursor: pointer; &quot;</span>
                                <span class="s2">&quot;display: inline-block; &quot;</span>
                                <span class="s2">&quot;font-size: .75rem;&quot;</span>
                                <span class="s2">&quot;min-width: 75px; &quot;</span>
                                <span class="s2">&quot;padding-right: 1rem; &quot;</span>
                                <span class="s2">&quot;padding-left: 1rem; &quot;</span>
                                <span class="s2">&quot;text-align: center; &quot;</span>
                                <span class="s2">&quot;text-decoration: none; &quot;</span>
                                <span class="s2">&quot;vertical-align: middle; &quot;</span>
                                <span class="s2">&quot;white-space: nowrap;&quot;</span><span class="p">),</span>
              <span class="s2">&quot;table_footer&quot;</span><span class="p">:</span> <span class="s2">&quot;line-height: 1.8rem; padding-bottom: 20px;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;row_count&quot;</span><span class="p">:</span> <span class="s2">&quot;float: left; line-height: 1.8rem;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;pager&quot;</span><span class="p">:</span> <span class="s2">&quot;float: right; line-height: 1.8rem;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;active_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;background-color: #0074d9; &quot;</span>
                                    <span class="s2">&quot;border: thin solid #0074d9; &quot;</span>
                                    <span class="s2">&quot;color: white; &quot;</span>
                                    <span class="s2">&quot;cursor: pointer; &quot;</span>
                                    <span class="s2">&quot;display: inline-block; &quot;</span>
                                    <span class="s2">&quot;font-size: .75rem;&quot;</span>
                                    <span class="s2">&quot;padding-right: .75rem; &quot;</span>
                                    <span class="s2">&quot;padding-left: .75rem; &quot;</span>
                                    <span class="s2">&quot;margin-right: .25rem; &quot;</span>
                                    <span class="s2">&quot;text-align: center; &quot;</span>
                                    <span class="s2">&quot;text-decoration: none; &quot;</span>
                                    <span class="s2">&quot;vertical-align: middle; &quot;</span>
                                    <span class="s2">&quot;white-space: nowrap;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;inactive_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;background-color: white; &quot;</span>
                                      <span class="s2">&quot;border: thin solid #0074d9; &quot;</span>
                                      <span class="s2">&quot;color: #0074d9; &quot;</span>
                                      <span class="s2">&quot;cursor: pointer; &quot;</span>
                                      <span class="s2">&quot;display: inline-block; &quot;</span>
                                      <span class="s2">&quot;font-size: .75rem;&quot;</span>
                                      <span class="s2">&quot;padding-right: .75rem; &quot;</span>
                                      <span class="s2">&quot;padding-left: .75rem; &quot;</span>
                                      <span class="s2">&quot;margin-right: .25rem; &quot;</span>
                                      <span class="s2">&quot;text-align: center; &quot;</span>
                                      <span class="s2">&quot;text-decoration: none; &quot;</span>
                                      <span class="s2">&quot;vertical-align: middle; &quot;</span>
                                      <span class="s2">&quot;white-space: nowrap;&quot;</span><span class="p">}</span>

    <span class="n">classes_styles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="ow">and</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">classes_styles</span><span class="p">[</span><span class="s2">&quot;_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="ow">and</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">classes_styles</span><span class="p">[</span><span class="s2">&quot;_style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">classes_styles</span>
</pre></div>
</div>
<p>GridClassStyleBulma - bulma implementation</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">GridClassStyleBulma</span><span class="p">(</span><span class="n">element_name</span><span class="p">):</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;field&quot;</span><span class="p">,</span>
               <span class="s2">&quot;top_div&quot;</span><span class="p">:</span> <span class="s2">&quot;pb-2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;new_button&quot;</span><span class="p">:</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form&quot;</span><span class="p">:</span> <span class="s2">&quot;is-pulled-right pb-2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_table&quot;</span><span class="p">:</span> <span class="s2">&quot;search-form&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;search_form_td&quot;</span><span class="p">:</span> <span class="s2">&quot;pr-1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;table is-bordered is-striped is-hoverable is-fullwidth&quot;</span><span class="p">,</span>
               <span class="s2">&quot;thead&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;th&quot;</span><span class="p">:</span> <span class="s2">&quot;has-text-centered&quot;</span><span class="p">,</span>
               <span class="s2">&quot;sorter_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;is-pulled-right&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;has-text-centered is-narrow&quot;</span><span class="p">,</span>
               <span class="s2">&quot;tbody&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td_date&quot;</span><span class="p">:</span> <span class="s2">&quot;has-text-centered&quot;</span><span class="p">,</span>
               <span class="s2">&quot;td_boolean&quot;</span><span class="p">:</span> <span class="s2">&quot;has-text-centered&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_column_cell&quot;</span><span class="p">:</span> <span class="s2">&quot;has-text-centered is-narrow&quot;</span><span class="p">,</span>
               <span class="s2">&quot;action_button&quot;</span><span class="p">:</span> <span class="s2">&quot;button is-small&quot;</span><span class="p">,</span>
               <span class="s2">&quot;table_footer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
               <span class="s2">&quot;row_count&quot;</span><span class="p">:</span> <span class="s2">&quot;is-pulled-left&quot;</span><span class="p">,</span>
               <span class="s2">&quot;pager&quot;</span><span class="p">:</span> <span class="s2">&quot;is-pulled-right&quot;</span><span class="p">,</span>
               <span class="s2">&quot;active_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;button is-primary is-small&quot;</span><span class="p">,</span>
               <span class="s2">&quot;inactive_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;button is-small&quot;</span><span class="p">}</span>

    <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;top_div&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;new_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_table&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;search_form_td&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;thead&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;th&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;sorter_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tbody&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td_date&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;td_boolean&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_column_cell&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;action_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;table_footer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;row_count&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;pager&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;active_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="s2">&quot;inactive_page_button&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>

    <span class="n">classes_styles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="ow">and</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">classes_styles</span><span class="p">[</span><span class="s2">&quot;_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="ow">and</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">classes_styles</span><span class="p">[</span><span class="s2">&quot;_style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_name</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">classes_styles</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-action-buttons">
<h2>Custom Action Buttons<a class="headerlink" href="#custom-action-buttons" title="Permalink to this headline">¶</a></h2>
<p>As with web2py, you can add additional buttons to each row in your grid.
You do this by providing pre_action_buttons or post_action_buttons to
the Grid <strong>init</strong> method.</p>
<ul class="simple">
<li>pre_action_buttons - list of action_button instances to include
before the standard action buttons</li>
<li>post_action_buttons - list of action_button instances to include
after the standard action buttons</li>
</ul>
</div>
<div class="section" id="action-button-signature">
<h2>Action Button Signature<a class="headerlink" href="#action-button-signature" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">url</span><span class="p">,</span>
             <span class="n">text</span><span class="p">,</span>
             <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fa-calendar&quot;</span><span class="p">,</span>
             <span class="n">additional_classes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">additional_styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">override_classes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">override_styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">append_id</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">append_storage_key</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">append_page</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</pre></div>
</div>
<ul class="simple">
<li>url: the page to navigate to when the button is clicked</li>
<li>text: text to display on the button</li>
<li>icon: the font-awesome icon to display before the text</li>
<li>additional_classes: a space-separated list of classes to include on
the button element</li>
<li>additional_styles: a space-separated list of classes to include on
the button element</li>
<li>override_classes: a space-separated list of classes to override the
defaults set up for a specific button</li>
<li>override_styles: a space-separated list of classes to override the
defaults set up for a specific button</li>
<li>message: confirmation message to display if ‘confirmation’ class is
added to additional classes</li>
<li>append_id: if True, add id_field_name=id_value to the url querystring
for the button</li>
<li>append_storage_key: if True, append the storage key for the grid to
the url for the button</li>
<li>append_page: if True, append page=<code class="docutils literal notranslate"><span class="pre">page_number</span></code> to the url
querystring</li>
</ul>
<p>Grid uses ActionButtons internally to generate the row buttons in the
grid. You can provide your own by specifying a list of ActionButtons in
the pre_action_buttons and/or post_action_buttons parameter on the Grid
<strong>init</strong> method.</p>
</div>
<div class="section" id="reference-fields">
<h2>Reference Fields<a class="headerlink" href="#reference-fields" title="Permalink to this headline">¶</a></h2>
<p>When displaying fields in a PyDAL table, you sometimes want to display a
more descriptive field than a foreign key value. There are a couple of
ways to handle that with the py4web grid.</p>
<p>filter_out on PyDAL field definition - here is an example of a foreign
key field</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Field</span><span class="p">(</span><span class="s1">&#39;company&#39;</span><span class="p">,</span> <span class="s1">&#39;reference company&#39;</span><span class="p">,</span>
      <span class="n">requires</span><span class="o">=</span><span class="n">IS_NULL_OR</span><span class="p">(</span><span class="n">IS_IN_DB</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s1">&#39;company.id&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;</span><span class="si">%(name)s</span><span class="s1">&#39;</span><span class="p">,</span>
                                   <span class="n">zero</span><span class="o">=</span><span class="s1">&#39;..&#39;</span><span class="p">)),</span>
      <span class="n">filter_out</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</pre></div>
</div>
<p>This will display the company name in the grid instead of the company ID</p>
<p>The downfall of using this method is that sorting and filtering are
based on the company field in the employee table and not the name of the
company</p>
<p>left join and specify fields from joined table - specified on the left
parameter of Grid instantiation</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">employee</span><span class="o">.</span><span class="n">company</span> <span class="o">==</span> <span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<p>You can specify a standard PyDAL left join, including a list of joins to
consider.</p>
<p>Now the company name field can be included in your fields list can be
clicked on and sorted.</p>
<p>Now you can also specify a query such as:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">queries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">db</span><span class="o">.</span><span class="n">employee</span><span class="o">.</span><span class="n">last_name</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_text</span><span class="p">))</span> <span class="o">|</span> <span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">employee</span><span class="o">.</span><span class="n">first_name</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_text</span><span class="p">))</span> <span class="o">|</span> <span class="n">db</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_text</span><span class="p">)))</span>
</pre></div>
</div>
<p>This method allows you to sort and filter, but doesn’t allow you to
combine fields to be displayed together as the filter_out method would</p>
<p>You need to determine which method is best for your use case
understanding the different grids in the same application may need to
behave differently.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="chapter-11.html" class="btn btn-neutral float-left" title="Authentication and Access control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, BSD-3-Clause License

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      
      
     <span class="fa fa-element">
     <input class="container_toggle" type="checkbox" id="switch" name="mode">
     <label for="switch"></label>
     </span>
      
      v: dev
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt>Languages</dt>
        
          
          <dd><a href="/py4web-doc/en/dev/">en</a></dd>
          
        
           <strong> 
          <dd><a href="/py4web-doc/pt/dev/">pt</a></dd>
           </strong> 
        
      </dl>
      
      
      <dl>
        <dt>Versions</dt>
        
           <strong> 
          <dd><a href="/py4web-doc/pt/dev/">dev</a></dd>
           </strong> 
        
          
          <dd><a href="/py4web-doc/pt/master/">master</a></dd>
          
        
      </dl>
      
      
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/py4web-doc/pt/dev/py4web-doc_pt_dev.pdf">pdf</a></dd>
        
          <dd><a href="/py4web-doc/pt/dev/py4web-doc_pt_dev.epub">epub</a></dd>
        
      </dl>
      
      
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
 
    </div>
  </div>

 

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>